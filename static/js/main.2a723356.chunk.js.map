{"version":3,"sources":["hooks/useTopic.js","utils/makeId.js","components/Check/index.jsx","components/Todo/index.jsx","utils/icon.js","utils/randomColor.js","components/Topic/index.jsx","hooks/useTodos.js","App.js","reportWebVitals.js","index.js"],"names":["useTopic","useState","topic","setTopic","a","q","query","collection","window","db","unsubscribe","onSnapshot","querySnapshot","arr","forEach","doc","push","id","data","sort","b","priority","useEffect","init","makeId","length","text","possible","i","charAt","Math","floor","random","useStyle","createUseStyles","root","display","alignItems","justifyContent","width","height","border","color","borderRadius","cursor","fill","backgroundColor","Check","value","onChange","classes","className","onClick","padding","fontSize","flexGrow","opacity","transition","input","isEditing","position","pointerEvents","outline","textDecoration","finished","forwardRef","ref","todo","provided","snapshot","remove","clickTimeout","useRef","inputRef","setEditing","setText","setFinished","finishedEditing","updateDoc","check","draggableProps","dragHandleProps","style","onOutsideClick","onKeyDown","e","key","target","current","focus","select","clearTimeout","setTimeout","isDragging","size","icons","work","book","person","star","money","game","mark","event","cart","bus","bug","archive","alarm","cam","randDarkColor","hex","String","toString","slice","toUpperCase","replace","c","rgb","parseInt","substr","round","min","max","boxShadow","margin","header","fontWeight","title","overflow","whiteSpace","textOverflow","list","footer","status","filter","process","button","flexShrink","transform","menu","top","zIndex","iconSelect","item","userSelect","selectPriority","invertButton","dataPicker","boxSizing","dataPickerClear","setTitle","setList","topMenuShow","setTopMenuShow","bottomMenuShow","setBottomMenuShow","todos","setTodos","preList","load","where","getDocs","findIndex","console","log","docChanges","change","type","back","refresh","useTodos","t","batch","writeBatch","docRef","set","tid","update","commit","delete","icon","changePriority","newPriority","Object","keys","map","k","background","switchIcon","cloneElement","onDoubleClick","onDragEnd","result","destination","items","Array","from","splice","source","index","removed","droppableId","droppableProps","innerRef","draggableId","placeholder","marginRight","deadline","moment","toDate","isBefore","local","fromNow","right","selected","date","dateFormat","isClearable","placeholderText","clearButtonClassName","backgroundSize","backgroundPositionX","show","commandInput","addButton","App","queryString","setQueryString","setShow","addDoc","ws","WebSocket","onmessage","message","onopen","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","getFirestore","cacheSizeBytes","CACHE_SIZE_UNLIMITED","enableIndexedDbPersistence","catch","err","code","Error","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mOAGe,SAASA,IAAY,IAAD,EACLC,mBAAS,MADJ,mBACxBC,EADwB,KACjBC,EADiB,iDAG/B,8BAAAC,EAAA,6DACUC,EAAIC,YAAMC,YAAWC,OAAOC,GAAI,UAChCC,EAAcC,YAAWN,GAAG,SAACO,GAC/B,IAAMC,EAAM,GACZD,EAAcE,SAAQ,SAACC,GACnBF,EAAIG,KAAJ,aAAWC,GAAIF,EAAIE,IAAOF,EAAIG,YAElCf,EAASU,EAAIM,MAAK,SAACf,EAAGgB,GAAJ,OAAUA,EAAEC,SAAWjB,EAAEiB,gBAPnD,mBAUW,kBAAMX,OAVjB,4CAH+B,sBAqB/B,OALAY,qBAAU,WAEN,OAlB2B,0CAiBjBC,KAEX,IAEI,CAAErB,S,YCxBAsB,G,MAAS,WAIlB,IAJmC,IAAhBC,EAAe,uDAAN,EACxBC,EAAO,GACLC,EAAW,iEAERC,EAAI,EAAGA,EAAIH,EAAQG,IACxBF,GAAQC,EAASE,OAAOC,KAAKC,MAAMD,KAAKE,SAAWL,EAASF,SAGhE,OAAOC,I,WCLLO,EAAWC,YAAgB,CAC7BC,KAAM,kBAAgB,CAClBC,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChBC,MAAO,GACPC,OAAQ,GACRC,OAAQ,CAAC,EANP,EAAGC,MAMc,SACnBC,aAAc,EACdC,OAAQ,YAEZC,KAAM,kBAAgB,CAClBN,MAAO,GACPC,OAAQ,GACRM,gBAHE,EAAGJ,MAILC,aAAc,MAIP,SAASI,EAAT,GAA4C,IAA3BL,EAA0B,EAA1BA,MAAOM,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,SACpCC,EAAUjB,EAAS,CAAES,UAE3B,OAAO,sBAAMS,UAAWD,EAAQf,KAAMiB,QAAS,kBAAMH,GAAUD,IAAxD,SACFA,GAAS,qBAAKG,UAAWD,EAAQL,S,qBClBpCZ,EAAWC,YAAgB,CAC7BC,KAAM,CACFC,QAAS,OACTC,WAAY,SACZgB,QAAS,CAAC,EAAG,IACbC,SAAU,GACV,UAAW,CACPlB,QAAS,OACTmB,SAAU,GAEd,YAAa,CACTC,QAAS,EACTC,WAAY,OAEhB,UAAW,CACP,YAAa,CACTD,QAAS,KAIrBE,MAAO,gBAAGC,EAAH,EAAGA,UAAH,MAAoB,CACvBC,SAAUD,EAAY,WAAa,WACnCH,QAASG,EAAY,EAAI,EACzBE,cAAeF,EAAY,OAAS,OACpCG,QAAS,OACTP,SAAU,EACVD,SAAU,KAEd5B,KAAM,gBAAGiC,EAAH,EAAGA,UAAH,MAA8B,CAChCvB,QAAS,eACTI,OAAQ,GACRoB,SAAWD,EAAyB,WAAb,WACvBH,QAAUG,EAAgB,EAAJ,EACtBE,cAAgBF,EAAqB,OAAT,OAC5BJ,SAAU,EACVD,SAAU,GACVS,eARE,EAAcC,SAQW,eAAiB,WAIrCC,wBAAW,WAA2DC,GAAM,IAAjDC,EAAgD,EAAhDA,KAAMzB,EAA0C,EAA1CA,MAAO0B,EAAmC,EAAnCA,SAAUC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,OACjEC,EAAeC,iBAAO,MAEtBC,EAAWD,iBAAO,MAH8D,EAKtDvE,oBAAS,GAL6C,mBAK/E0D,EAL+E,KAKpEe,EALoE,KAOhFxB,EAAUjB,EAAS,CAAE0B,YAAWK,SAAUG,EAAKH,WAPiC,EAS9D/D,mBAAS,IATqD,mBAS/EyB,EAT+E,KASzEiD,EATyE,OAUtD1E,oBAAS,GAV6C,mBAUrE2E,GAVqE,WA0BtF,SAASC,IACL,GAAIlB,EAAW,CACX,IAAMO,EAAMnD,YAAIP,OAAOC,GAAI,OAAQ0D,EAAKlD,IACxC6D,YAAUZ,EAAK,CACXxC,KAAMA,IAEVgD,GAAW,IAhCmE,SAoCvEK,EApCuE,8EAoCtF,WAAqB/B,GAArB,eAAA5C,EAAA,6DACU8D,EAAMnD,YAAIP,OAAOC,GAAI,OAAQ0D,EAAKlD,IAD5C,SAEU6D,YAAUZ,EAAK,CACjBF,SAAUhB,IAHlB,4CApCsF,sBAatF1B,qBAAU,WACF6C,IACAQ,EAAQR,EAAKzC,MACbkD,EAAYT,EAAKH,aAEtB,CAACG,IAkDJ,OAAO,0DAAKhB,UAAWD,EAAQf,KAC3B+B,IAAKA,GACDE,EAASY,gBAAoBZ,EAASa,iBAFvC,cAGH,cAAClC,EAAD,CAAOL,MAAOA,EAAOM,MAAOmB,EAAKH,SAAUf,SAAU,SAACD,GAClD4B,EAAY5B,GACZ+B,EAAM/B,MAEV,sBAAMkC,MAAO,CAAE3C,MAAO,MACtB,eAAC,IAAD,CACI4C,eAAgB,kBAAMN,KAD1B,UAII,uBAAOX,IAAKO,EACRtB,UAAWD,EAAQQ,MACnBV,MAAOtB,EACP0D,UAAW,SAACC,GAAsB,UAAVA,EAAEC,KAAiBT,KAC3C5B,SAAU,SAACoC,GAAD,OAAOV,EAAQU,EAAEE,OAAOvC,UACtC,sBAAMG,UAAWD,EAAQxB,KAAM0B,QA1CvC,WACiC,OAAzBmB,EAAaiB,SAvBjBd,GAAW,GACXD,EAASe,QAAQC,QACjBhB,EAASe,QAAQE,SAuBbC,aAAapB,EAAaiB,SAC1BjB,EAAaiB,QAAU,MAEvBjB,EAAaiB,QAAUI,YAAW,WAC9BrB,EAAaiB,QAAU,KACnBnB,EAASwB,aACbjB,GAAaT,EAAKH,UAClBe,GAAOZ,EAAKH,aACb,MA+BH,SAAkDtC,IAClD,cAAC,IAAD,CAAUyB,UAAU,SAAS2C,KAAM,GAAIpD,MAAOA,EAAOU,QAAS,WAAQkB,EAAOH,EAAKlD,iB,0BCpIjF8E,EAAQ,CACjBC,KAAM,cAAC,IAAD,IACNC,KAAM,cAAC,IAAD,IACNC,OAAQ,cAAC,IAAD,IACRC,KAAM,cAAC,IAAD,IACNC,MAAO,cAAC,IAAD,IACPC,KAAM,cAAC,IAAD,IACNC,KAAM,cAAC,IAAD,IACNC,MAAO,cAAC,IAAD,IACPC,KAAM,cAAC,IAAD,IACNC,IAAK,cAAC,IAAD,IACLC,IAAK,cAAC,IAAD,IACLC,QAAS,cAAC,IAAD,IACTC,MAAO,cAAC,IAAD,IACPC,IAAK,cAAC,IAAD,K,oBChBF,SAASC,IACZ,IACIC,EAAMC,OAAO,IAAMlF,KAAKE,SAASiF,SAAS,IAAIC,MAAM,EAAG,GAAGC,eAAeC,QAAQ,cAAe,IAChGL,EAAItF,OAAS,IACbsF,EAAMA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAE3D,IACIM,EAAGzF,EADH0F,EAAM,IAEV,IAAK1F,EAAI,EAAGA,EAAI,EAAGA,IACfyF,EAAIE,SAASR,EAAIS,OAAW,EAAJ5F,EAAO,GAAI,IAEnC0F,IAAQ,MADRD,EAAIvF,KAAK2F,MAAM3F,KAAK4F,IAAI5F,KAAK6F,IAAI,EAAGN,GAT9B,IASmCA,GAAW,MAAMJ,SAAS,MACjDO,OAAOH,EAAE5F,QAE/B,OAAO6F,E,qBCKLrF,G,OAAWC,YAAgB,CAC7BC,KAAM,CACFW,gBAAiB,QACjB8E,UAAW,CAAC,EAAG,EAAG,EAAG,EAAG,QACxBjF,aAAc,EACdkF,OAAQ,CAAC,GAAI,IAEjBC,OAAQ,kBAAgB,CACpBlE,SAAU,WACVxB,QAAS,OACTC,WAAY,SACZS,gBAJI,EAAGJ,MAKPC,aAAc,CAAC,EAAG,EAAG,EAAG,GACxBU,QAAS,CAAC,GAAI,IACdX,MAAO,QACPqF,WAAY,IACZzE,SAAU,GACVG,WAAY,QAEhBC,MAAO,gBAAGC,EAAH,EAAGA,UAAH,MAAoB,CACvBC,SAAUD,EAAY,WAAa,WACnCH,QAASG,EAAY,EAAI,EACzBE,cAAeF,EAAY,OAAS,OACpCG,QAAS,OACTP,SAAU,EACVD,SAAU,KAEd0E,MAAO,gBAAGrE,EAAH,EAAGA,UAAH,MAA8B,CACjCvB,QAAS,eACTI,OAAQ,GACRoB,SAAWD,EAAyB,WAAb,WACvBH,QAAUG,EAAgB,EAAJ,EACtBE,cAAgBF,EAAqB,OAAT,OAC5BJ,SAAU,EACVD,SAAU,GACVV,OAAQ,UACRmB,eATG,EAAcC,SASU,eAAiB,OAC5CiE,SAAU,SACVC,WAAY,SACZC,aAAc,aAElBC,KAAM,CACF/E,QAAS,CAAC,EAAG,IAEjBgF,OAAQ,CACJzE,SAAU,WACVxB,QAAS,OACTiB,QAAS,CAAC,EAAG,IACbC,SAAU,GACVhB,eAAgB,iBAEpBgG,OAAQ,CACJ1F,OAAQ,UACRR,QAAS,eACTU,gBAAiB,QACjBH,aAAc,IACdU,QAAS,CAAC,EAAG,IACbI,WAAY,MACZ,UAAW,CACP8E,OAAQ,oBAGhBlH,SAAU,kBAAmB,CACzBe,QAAS,eACTU,gBAAiB,CAAC,QAAS,UAAW,OAFhC,EAAGzB,UAGTkB,MAAO,GACPC,OAAQ,GACRqF,OAAQ,CAAC,EAAG,EAAG,EAAG,GAClBlF,aAAc,MAElB6F,QAAS,gBAAG9F,EAAH,EAAGA,MAAO8F,EAAV,EAAUA,QAAV,MAAyB,CAC9BP,SAAU,SACVtF,aAAc,CAAC,EAAG,EAAG,EAAG,GACxB,QAAS,CACLG,gBAAiBJ,EACjBH,MAAM,GAAD,OAAKiG,EAAL,KACLhG,OAAQ,EACRiB,WAAY,SAGpBgF,OAAQ,gBAAG/F,EAAH,EAAGA,MAAH,MAAgB,CACpBE,OAAQ,UACRL,MAAO,GACPC,OAAQ,GACRJ,QAAS,cACTiB,QAAS,EACThB,WAAY,SACZM,aAAc,IACdL,eAAgB,SAChBQ,gBAAiBJ,EACjBe,WAAY,MACZiF,WAAY,EACZ,QAAS,CACLhG,MAAO,QACPe,WAAY,OAEhB,UAAW,CACPX,gBAAiB,QACjB,QAAS,CACLJ,MAAOA,GAEX,eAAgB,CACZiG,UAAW,qBAIvBC,KAAM,CACFhF,SAAU,WACVP,QAAS,GACTd,MAAO,IACPO,gBAAiB,QACjB+F,IAAK,oBACLjB,UAAW,CAAC,EAAG,EAAG,EAAG,EAAG,QACxBkB,OAAQ,GACRnG,aAAc,GACdc,WAAY,OAEhBsF,WAAY,CACRnG,OAAQ,UACRL,MAAO,GACPC,OAAQ,GACRJ,QAAS,cACTiB,QAAS,EACThB,WAAY,SACZM,aAAc,IACdL,eAAgB,SAChBmB,WAAY,OAEhBuF,KAAM,gBAAGtG,EAAH,EAAGA,MAAH,MAAgB,CAClBW,QAAS,EACTjB,QAAS,OACTC,WAAY,SACZK,MAAOA,EACPI,gBAAiB,QACjB,UAAW,CACPJ,MAAO,QACPI,gBAAiBJ,GAErBuG,WAAY,SAEhBC,eAAgB,CACZ9G,QAAS,OACTE,eAAgB,SAChBD,WAAY,UAEhB8G,aAAc,gBAAGzG,EAAH,EAAGA,MAAH,MAAgB,CAC1BE,OAAQ,UACRL,MAAO,GACPC,OAAQ,GACRqF,OAAQ,CAAC,EAAG,IACZzF,QAAS,cACTiB,QAAS,EACThB,WAAY,SACZM,aAAc,IACdL,eAAgB,SAChBQ,gBAAiB,QACjBW,WAAY,MACZiF,WAAY,EACZ,QAAS,CACLhG,MAAOA,EACPe,WAAY,OAEhB,UAAW,CACPX,gBAAiBJ,EACjB,QAAS,CACLA,MAAO,YAInB0G,WAAY,kBAAgB,CACxBC,UAAW,cACXxB,OAAQ,CAAC,GAAI,GACbxE,QAAS,CAAC,EAAG,IACbd,MAAO,OACPI,aAAc,IACdmB,QAAS,OACTrB,OAAQ,CAAC,EAAG,QAPJ,EAAGC,SASf4G,gBAAiB,kBAAgB,CAC7B,WAAY,CACRxG,gBAFS,EAAGJ,MAEa,oBAOtBuB,wBAAW,WAA0BC,GAAM,IF1LlCoB,EE0LmBpF,EAAc,EAAdA,MAAc,EAErBD,oBAAS,GAFY,mBAE9C0D,EAF8C,KAEnCe,EAFmC,KAG/CD,EAAWD,iBAAO,MAH6B,EAM3BvE,mBAAS,IANkB,mBAM9C+H,EAN8C,KAMvCuB,EANuC,OAO7BtJ,mBAAS,IAPoB,mBAO9CmI,EAP8C,KAOxCoB,EAPwC,OASfvJ,oBAAS,GATM,mBAS9CwJ,EAT8C,KASjCC,EATiC,OAUTzJ,oBAAS,GAVA,mBAU9C0J,EAV8C,KAU9BC,EAV8B,KAY7CC,ECpNG,SAAkB5I,EAAImH,GAAO,IAAD,EACbnI,mBAAS,IADI,mBAChC4J,EADgC,KACzBC,EADyB,KAGjCC,EAAUvF,iBAAO,MAHgB,SAKxBwF,IALwB,2EAKvC,gCAAA5J,EAAA,6DACUC,EAAIC,YAAMC,YAAWC,OAAOC,GAAI,QAASwJ,YAAM,MAAO,KAAMhJ,IADtE,SAGgCiJ,YAAQ7J,GAHxC,OAGUO,EAHV,OAIQC,EAAM,GACVD,EAAcE,SAAQ,SAACC,GACnBF,EAAIuH,EAAK+B,WAAU,SAAClJ,GAAD,OAAQA,IAAOF,EAAIE,OAAtC,aAAgDA,GAAIF,EAAIE,IAAOF,EAAIG,WAGvE4I,EAASjJ,GATb,4CALuC,sBA6CvC,OA5BAS,qBAAU,WACN,GAAK8G,EAAL,CACA4B,IACA,IAAM3J,EAAIC,YAAMC,YAAWC,OAAOC,GAAI,QAASwJ,YAAM,MAAO,KAAMhJ,IAC5DP,EAAcC,YAAWN,GAAG,SAACO,GAC/BwJ,QAAQC,IAAI,cACZzJ,EAAc0J,aAAaxJ,SAAQ,SAACyJ,GAChC,GAAoB,aAAhBA,EAAOC,KAAqB,CAC5B,IAAMC,EAAI,YAAOV,EAAQvE,SACzBiF,EAAKrC,EAAK+B,WAAU,SAAClJ,GAAD,OAAQA,IAAOsJ,EAAOxJ,IAAIE,OAA9C,aAAwDA,GAAIsJ,EAAOxJ,IAAIE,IAAOsJ,EAAOxJ,IAAIG,QACzF4I,EAASW,UAKrB,OAAO,WACH/J,QAEL,CAAC0H,IAEJ9G,qBAAU,WACNyI,EAAQvE,QAAUqE,IACnB,CAACA,IAMG,CAAEA,QAAOa,QAASV,GDuKPW,CAASzK,EAAMe,GAAImH,GAA7ByB,MAEF3G,EAAUjB,EAAS,CACrBS,MAAOxC,EAAMwC,MACbrB,SAAUnB,EAAMmB,SAChBmH,QAASqB,EAAyB,IAAjBA,EAAMpI,OAAe,IAAMoI,EAAMtB,QAAO,SAAAqC,GAAC,OAAIA,EAAE5G,YAAUvC,OAASoI,EAAMpI,OAAS,IAAM,EACxGkC,cAeJ,SAASkB,IACL,GAAIlB,EAAW,CACX,IAAMO,EAAMnD,YAAIP,OAAOC,GAAI,QAASP,EAAMe,IAC1C6D,YAAUZ,EAAK,CACX8D,UAEJtD,GAAW,IAvCkC,4CA2DrD,kCAAAtE,EAAA,6DACUyK,EAAQC,YAAWtK,OAAOC,IAC1BsK,EAAShK,YAAIP,OAAOC,GAAI,OAAQe,EAAO,KAC7CqJ,EAAMG,IAAID,EAAQ,CACdE,IAAK/K,EAAMe,GACXS,KAAM,qBACNsC,UAAU,IAERoE,EARV,sBAQqBlI,EAAMkI,MAR3B,CAQiC2C,EAAO9J,KACpCuI,EAAQpB,GACFlE,EAAMnD,YAAIP,OAAOC,GAAI,QAASP,EAAMe,IAC1C4J,EAAMK,OAAOhH,EAAK,CAAEkE,SAXxB,SAYUyC,EAAMM,SAZhB,4CA3DqD,+BA0EtC7G,EA1EsC,8EA0ErD,WAAsBrD,GAAtB,mBAAAb,EAAA,sDACUyK,EAAQC,YAAWtK,OAAOC,IAC1B2H,EAAOlI,EAAMkI,KAAKG,QAAO,SAACpE,GAAD,OAAUA,IAASlD,KAClDuI,EAAQpB,GACFlE,EAAMnD,YAAIP,OAAOC,GAAI,QAASP,EAAMe,IAC1C4J,EAAMK,OAAOhH,EAAK,CACdkE,SAEJyC,EAAMO,OAAOrK,YAAIP,OAAOC,GAAI,OAAQQ,IACpC4J,EAAMM,SATV,4CA1EqD,kEAsFrD,4BAAA/K,EAAA,uDACUyK,EAAQC,YAAWtK,OAAOC,KAC1B2K,OAAOrK,YAAIP,OAAOC,GAAI,QAASP,EAAMe,KAC3CmH,EAAKtH,SAAQ,SAACG,GACV4J,EAAMO,OAAOrK,YAAIP,OAAOC,GAAI,OAAQQ,OAExC4J,EAAMM,SANV,4CAtFqD,kEA+FrD,WAA0BE,GAA1B,eAAAjL,EAAA,sDACU8D,EAAMnD,YAAIP,OAAOC,GAAI,QAASP,EAAMe,IAC1C6D,YAAUZ,EAAK,CACXmH,KAAMA,IAHd,4CA/FqD,sBA6GrD,SAASC,EAAetI,GACpB,IAAIuI,GAAerL,EAAMmB,SAAW,EAAI2B,GAAS,EAC3CkB,EAAMnD,YAAIP,OAAOC,GAAI,QAASP,EAAMe,IAC1C6D,YAAUZ,EAAK,CACX7C,SAAUkK,IAYlB,OAxGAjK,qBAAU,WACDpB,IACLqJ,EAASrJ,EAAM8H,OACfwB,EAAQtJ,EAAMkI,SACf,CAAClI,IAoGI2J,EACJ,sBAAK1G,UAAWD,EAAQf,KAAM+B,IAAKA,EAAnC,UACI,cAAC,IAAD,CACIiB,eAAgB,WACZN,IACA6E,GAAe,IAEnBtH,QAAQ,QALZ,SAOI,sBAAKe,UAAWD,EAAQ4E,OAAxB,UACI,sBAAM3E,UAAWD,EAAQuF,OAAQrF,QAAS,kBAAMsG,GAAe,IAA/D,UFjUIpE,EEkUSpF,EAAMmL,KFjU5BtF,EAAMT,MEmUG,sBAAKnC,UAAWD,EAAQ0F,KAAM1D,MAAO,CAAExC,MAAOxC,EAAMwC,MAAOc,QAASiG,EAAc,EAAI,EAAG5F,cAAe4F,EAAc,OAAS,QAA/H,UACI,8BACK+B,OAAOC,KAAK1F,GAAO2F,KAAI,SAACC,GAAD,OACpB,sBAAcxI,UAAWD,EAAQ6F,WAAY7D,MAAO,CAAE0G,WAAY1L,EAAMmL,OAASM,GAAKzL,EAAMwC,OAASU,QAAS,kBA7IrF,2CA6I2FyI,CAAWF,IAA/H,SACKG,uBAAa/F,EAAM4F,GAAI,CAAE7F,KAAM,GAAIpD,MAAOxC,EAAMmL,OAASM,EAAI,QAAU,MADjEA,QAKnB,uBACA,sBAAKxI,UAAWD,EAAQ8F,KAAM5F,QAnJG,2CAmJjC,UAAoD,cAAC,IAAD,IAApD,mBACA,sBAAKD,UAAWD,EAAQ8F,KAAM5F,QA9ClD,WACI,IAAMc,EAAMnD,YAAIP,OAAOC,GAAI,QAASP,EAAMe,IAC1C6D,YAAUZ,EAAK,CACXxB,MAAOoE,OA2CK,UAAoD,cAAC,IAAD,IAApD,kCAGJ,sBAAM5B,MAAO,CAAE3C,MAAO,KACtB,qBAAKY,UAAWD,EAAQ8E,MAAO+D,cA7H/C,WACIrH,GAAW,GACXD,EAASe,QAAQC,QACjBhB,EAASe,QAAQE,UA0HL,SAA6DsC,IAC7D,uBAAO9D,IAAKO,EACRtB,UAAWD,EAAQQ,MACnBV,MAAOgF,EACP5C,UAAW,SAACC,GAAsB,UAAVA,EAAEC,KAAiBT,KAC3C5B,SAAU,SAACoC,GAAD,OAAOkE,EAASlE,EAAEE,OAAOvC,UACvC,sBAAMG,UAAWD,EAAQuF,OAAzB,SACI,cAAC,IAAD,CAAOtF,UAAU,SAASC,QA/JO,oDAoK7C,cAAC,IAAD,CAAiB4I,UAzHzB,SAAmBC,GACf,GAAKA,EAAOC,YAAZ,CAGA,IAAMC,EAAQC,MAAMC,KAAKnM,EAAMkI,MAJR,EAKL+D,EAAMG,OAAOL,EAAOM,OAAOC,MAAO,GAA7CC,EALgB,oBAMvBN,EAAMG,OAAOL,EAAOC,YAAYM,MAAO,EAAGC,GAE1CjD,EAAQ2C,GACR,IAAMjI,EAAMnD,YAAIP,OAAOC,GAAI,QAASP,EAAMe,IAC1C6D,YAAUZ,EAAK,CACXkE,KAAM+D,MA8GN,SACI,cAAC,IAAD,CAAWO,YAAY,YAAvB,SACK,SAACtI,EAAUC,GAAX,OACG,gDACQD,EAASuI,gBADjB,IAEIzI,IAAKE,EAASwI,SACdzJ,UAAWD,EAAQkF,KAHvB,UAKKyB,EAAM6B,KAAI,SAACvH,EAAMvC,GAAP,OACP,cAAC,IAAD,CAAyBiL,YAAa1I,EAAKlD,GAAIuL,MAAO5K,EAAtD,SACK,SAACwC,EAAUC,GAAX,OACG,cAAC,EAAD,CAAMH,IAAKE,EAASwI,SAAwBzI,KAAMA,EAAMzB,MAAOxC,EAAMwC,MACjE0B,SAAUA,EAAUC,SAAUA,EAAUC,OAAQA,GADjBH,EAAKlD,MAFhCkD,EAAKlD,OAOxBmD,EAAS0I,qBAM1B,cAAC,IAAD,CACI3H,eAAgB,WACZyE,GAAkB,IAEtBxH,QAAQ,QAJZ,SAMI,sBAAKe,UAAWD,EAAQmF,OAAxB,UACI,uBAAMnD,MAAO,CAAExC,MAAOxC,EAAMwC,MAAOqF,WAAY,KAA/C,UACsB,IAAjB8B,EAAMpI,OAAe,EAAIK,KAAK2F,MAAMoC,EAAMtB,QAAO,SAAAqC,GAAC,OAAIA,EAAE5G,YAAUvC,OAASoI,EAAMpI,OAAS,KAD/F,OAGA,uBAAM0B,UAAWD,EAAQoF,OAAQlF,QAAS,kBAAMwG,GAAkB,IAAlE,UACwB,IAAnB1J,EAAMmB,SAAiB,cAAC,IAAD,CAAeqB,MAAOxC,EAAMwC,MAAOwC,MAAO,CAAE6H,YAAa,KAAU,sBAAM5J,UAAWD,EAAQ7B,WAClHnB,EAAM8M,SACJC,IAAO/M,EAAM8M,SAASE,UAAUC,SAASF,OAAY,sBAAM/H,MAAO,CAAExC,MAAO,OAAtB,gCACjDuK,IAAO/M,EAAM8M,SAASE,UAAUE,MAAM,SAASC,UAFpC,wBAKvB,sBAAKlK,UAAWD,EAAQ0F,KAAM1D,MAAO,CAAEoI,MAAO,EAAG5K,MAAOxC,EAAMwC,MAAOc,QAASmG,EAAiB,EAAI,EAAG9F,cAAe8F,EAAiB,OAAS,QAA/I,UACI,sBAAKxG,UAAWD,EAAQgG,eAAxB,UACI,sBAAM/F,UAAWD,EAAQiG,aAAc/F,QAAS,kBAAMkI,GAAgB,IAAtE,SACI,cAAC,IAAD,CAAqBxF,KAAM,OAEX,IAAnB5F,EAAMmB,SAAiB,cAAC,IAAD,CAAeqB,MAAOxC,EAAMwC,QAAY,sBAAMS,UAAWD,EAAQ7B,WACzF,sBAAM6D,MAAO,CAAExC,MAAO,CAAC,QAAS,UAAW,OAAOxC,EAAMmB,WAAxD,SACwB,IAAnBnB,EAAMmB,SAAiB,eAAO,CAAC,SAAK,SAAK,UAAKnB,EAAMmB,YAEzD,sBAAM8B,UAAWD,EAAQiG,aAAc/F,QAAS,kBAAMkI,EAAe,IAArE,SACI,cAAC,IAAD,CAAsBxF,KAAM,UAGnCsE,QAAQC,IAAInK,EAAM8M,UACnB,cAAC,IAAD,CACI7J,UAAWD,EAAQkG,WACnBmE,SAAUrN,EAAM8M,SAAW9M,EAAM8M,SAASE,SAAW,KACrDjK,SAvGxB,SAAwBuK,GACpBpD,QAAQC,IAAI,OAAQmD,GACpB,IAAMtJ,EAAMnD,YAAIP,OAAOC,GAAI,QAASP,EAAMe,IAC1C6D,YAAUZ,EAAK,CACX8I,SAAUQ,KAoGMC,WAAW,aACXC,aAAW,EACXC,gBAAgB,qBAChBC,qBAAsB1K,EAAQoG,0BAM9C,qBAAKnG,UAAWD,EAAQsF,QAAxB,SACI,6BAIR,gC,QEhbFvG,EAAWC,YAAgB,CAC/BC,KAAM,kBAAe,CACnBK,OAAQ,QACRD,MAAO,IACPqJ,WAAY,wBACZ9I,gBAAiB,4BACjBgG,OAAQ,EACR+E,eAAgB,QAChBC,oBAAqB,MACrBrK,WAAY,MACZkF,UATI,EAAGoF,KASW,gBAAkB,sBAEtCC,aAAc,CACZ5L,QAAS,OACTC,WAAY,SACZE,MAAO,IACPO,gBAAiB,QACjBO,QAAS,CAAC,GAAI,IACd,UAAW,CACTE,SAAU,EACVF,QAAS,EACTC,SAAU,GACVb,OAAQ,OACRqB,QAAS,SAGbsE,KAAM,CACJ/E,QAAS,CAAC,EAAG,KAEf4K,UAAW,CACTrL,OAAQ,UACRL,MAAO,GACPC,OAAQ,GACRJ,QAAS,cACTC,WAAY,SACZM,aAAc,IACdL,eAAgB,SAChBQ,gBAAiB,QACjBW,WAAY,MACZ,QAAS,CACPf,MAAO,OACPe,WAAY,OAEd,UAAW,CACTX,gBAAiB,OACjB,QAAS,CACPJ,MAAO,QACPiG,UAAW,sBAwDJuF,MAlDf,WAAgB,IAAD,EACyBjO,mBAAS,IADlC,mBACNkO,EADM,KACOC,EADP,OAEWnO,oBAAS,GAFpB,mBAEN8N,EAFM,KAEAM,EAFA,KAGPnL,EAAUjB,EAAS,CAAE8L,SAEnB7N,EAAUF,IAAVE,MALK,4CAOb,sBAAAE,EAAA,sEACQkO,YAAO/N,YAAWC,OAAOC,GAAI,SAAU,CAC3CiC,MAAOoE,IACPkG,SAAU,KACV3B,KAAM,SACNjD,KAAM,GACN/G,SAAU,EACV2G,MAAO,uBAPX,4CAPa,sBA+Bb,OAbA1G,qBAAU,WACR,IAAMiN,EAAK,IAAIC,UAAU,uBAEzBD,EAAGE,UAAa,SAAkBC,GACX,SAAjBA,EAAQxN,KACVmN,GAAQ,GACkB,WAAjBK,EAAQxN,MACjBmN,GAAQ,IAGZE,EAAGI,OAAS,kBAAMvE,QAAQC,IAAI,WAC7B,IAGD,sBAAKlH,UAAWD,EAAQf,KAAxB,UACE,sBAAKgB,UAAWD,EAAQ8K,aAAxB,UACE,cAAC,IAAD,CAAgBlI,KAAM,KACtB,uBAAO9C,MAAOmL,EAAalL,SAAU,SAACoC,GAAD,OAAO+I,EAAe/I,EAAEE,OAAOvC,UACpE,sBAAMG,UAAWD,EAAQ+K,UAAW7K,QApC7B,2CAoCP,SACE,cAAC,IAAD,CAAO0C,KAAM,UAIjB,qBAAK3C,UAAWD,EAAQkF,KAAxB,SACGlI,GACC,cAAC,IAAD,UAAWA,EAAMwL,KAAI,SAACxL,GAAD,OAAW,cAAC,EAAD,CAAsBA,MAAOA,GAAjBA,EAAMe,eC5F7C2N,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,QCYdrO,OAAO6O,SAAWC,YAVK,CACrBC,OAAQ,0CACRC,WAAY,yCACZC,UAAW,yBACXC,cAAe,qCACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAIjBrP,OAAOC,GAAKqP,YAAatP,OAAO6O,SAC5B,CAAEU,eAAgBC,MAGtBC,YAA2BzP,OAAOC,IAC/ByP,OAAM,SAACC,GACN,GAAiB,wBAAbA,EAAIC,KACN,MAAM,IAAIC,MAAM,uBACX,GAAiB,kBAAbF,EAAIC,KACb,MAAM,IAAIC,MAAM,oBAKtBC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1B9B,K","file":"static/js/main.2a723356.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport { collection, onSnapshot, query } from \"firebase/firestore\";\r\n\r\nexport default function useTopic() {\r\n    const [topic, setTopic] = useState(null)\r\n\r\n    async function init() {\r\n        const q = query(collection(window.db, \"topic\"));\r\n        const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n            const arr = [];\r\n            querySnapshot.forEach((doc) => {\r\n                arr.push({ id: doc.id, ...doc.data() });\r\n            });\r\n            setTopic(arr.sort((a, b) => b.priority - a.priority))\r\n        });\r\n\r\n        return () => unsubscribe()\r\n    }\r\n\r\n    useEffect(() => {\r\n        const a = init()\r\n        return a\r\n    }, [])\r\n\r\n    return { topic }\r\n}","export const makeId = (length = 5) => {\r\n    let text = \"\";\r\n    const possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n\r\n    for (let i = 0; i < length; i++) {\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n\r\n    return text;\r\n}","import { useState } from 'react';\r\nimport { createUseStyles } from 'react-jss'\r\nimport useTodos from '../../hooks/useTodos';\r\nconst useStyle = createUseStyles({\r\n    root: ({ color }) => ({\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        width: 18,\r\n        height: 18,\r\n        border: [2, color, \"solid\"],\r\n        borderRadius: 5,\r\n        cursor: \"default\",\r\n    }),\r\n    fill: ({ color }) => ({\r\n        width: 10,\r\n        height: 10,\r\n        backgroundColor: color,\r\n        borderRadius: 3\r\n    }),\r\n})\r\n\r\nexport default function Check({ color, value, onChange }) {\r\n    const classes = useStyle({ color })\r\n\r\n    return <span className={classes.root} onClick={() => onChange(!value)}>\r\n        {value && <div className={classes.fill} />}\r\n    </span>\r\n}\r\n\r\n","import { useEffect, useRef, useState } from 'react';\r\nimport { createUseStyles } from 'react-jss'\r\nimport Check from '../Check';\r\nimport { doc, updateDoc } from 'firebase/firestore';\r\nimport OutsideClickHandler from 'react-outside-click-handler';\r\nimport { MdRemove } from \"react-icons/md\";\r\nimport { forwardRef } from 'react';\r\n\r\nconst useStyle = createUseStyles({\r\n    root: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        padding: [5, 10],\r\n        fontSize: 16,\r\n        \"& > div\": {\r\n            display: \"flex\",\r\n            flexGrow: 1\r\n        },\r\n        \"& .remove\": {\r\n            opacity: 0,\r\n            transition: \".3s\",\r\n        },\r\n        \"&:hover\": {\r\n            \"& .remove\": {\r\n                opacity: 1,\r\n            },\r\n        }\r\n    },\r\n    input: ({ isEditing }) => ({\r\n        position: isEditing ? \"relative\" : \"absolute\",\r\n        opacity: isEditing ? 1 : 0,\r\n        pointerEvents: isEditing ? \"auto\" : \"none\",\r\n        outline: \"none\",\r\n        flexGrow: 1,\r\n        fontSize: 16\r\n    }),\r\n    text: ({ isEditing, finished }) => ({\r\n        display: \"inline-block\",\r\n        height: 25,\r\n        position: !isEditing ? \"relative\" : \"absolute\",\r\n        opacity: !isEditing ? 1 : 0,\r\n        pointerEvents: !isEditing ? \"auto\" : \"none\",\r\n        flexGrow: 1,\r\n        fontSize: 18,\r\n        textDecoration: finished ? \"line-through\" : \"none\",\r\n    }),\r\n})\r\n\r\nexport default forwardRef(function Todo({ todo, color, provided, snapshot, remove }, ref) {\r\n    const clickTimeout = useRef(null)\r\n\r\n    const inputRef = useRef(null);\r\n\r\n    const [isEditing, setEditing] = useState(false)\r\n\r\n    const classes = useStyle({ isEditing, finished: todo.finished })\r\n\r\n    const [text, setText] = useState(\"\")\r\n    const [finished, setFinished] = useState(false)\r\n\r\n\r\n    useEffect(() => {\r\n        if (todo) {\r\n            setText(todo.text)\r\n            setFinished(todo.finished)\r\n        }\r\n    }, [todo])\r\n\r\n    function startEditing() {\r\n        setEditing(true)\r\n        inputRef.current.focus()\r\n        inputRef.current.select()\r\n    }\r\n\r\n    function finishedEditing() {\r\n        if (isEditing) {\r\n            const ref = doc(window.db, \"todo\", todo.id);\r\n            updateDoc(ref, {\r\n                text: text\r\n            })\r\n            setEditing(false)\r\n        }\r\n    }\r\n\r\n    async function check(value) {\r\n        const ref = doc(window.db, \"todo\", todo.id);\r\n        await updateDoc(ref, {\r\n            finished: value\r\n        });\r\n    }\r\n\r\n    function onClick() {\r\n        if (clickTimeout.current !== null) {\r\n            startEditing()\r\n            clearTimeout(clickTimeout.current)\r\n            clickTimeout.current = null\r\n        } else {\r\n            clickTimeout.current = setTimeout(() => {\r\n                clickTimeout.current = null\r\n                if (snapshot.isDragging) return\r\n                setFinished(!todo.finished)\r\n                check(!todo.finished)\r\n            }, 200)\r\n        }\r\n    }\r\n\r\n    const mergeRefs = (...refs) => (ref) => {\r\n        refs.forEach((resolvableRef) => {\r\n            if (typeof resolvableRef === \"function\") {\r\n                resolvableRef(ref);\r\n            } else {\r\n                if (resolvableRef) resolvableRef.current = ref;\r\n            }\r\n        });\r\n    };\r\n\r\n    return <div className={classes.root}\r\n        ref={ref}\r\n        {...provided.draggableProps} {...provided.dragHandleProps}>\r\n        <Check color={color} value={todo.finished} onChange={(value) => {\r\n            setFinished(value)\r\n            check(value)\r\n        }} />\r\n        <span style={{ width: 10 }} />\r\n        <OutsideClickHandler\r\n            onOutsideClick={() => finishedEditing()}\r\n\r\n        >\r\n            <input ref={inputRef}\r\n                className={classes.input}\r\n                value={text}\r\n                onKeyDown={(e) => { if (e.key === \"Enter\") finishedEditing() }}\r\n                onChange={(e) => setText(e.target.value)} />\r\n            <span className={classes.text} onClick={onClick}>{text}</span>\r\n            <MdRemove className=\"remove\" size={20} color={color} onClick={() => { remove(todo.id) }} />\r\n        </OutsideClickHandler >\r\n    </div>\r\n}\r\n\r\n)","import { MdWork, MdBook, MdPerson, MdStar, MdAttachMoney, MdVideogameAsset, MdMarkunread, MdEvent, MdLocalGroceryStore, MdSearch, MdDirectionsBus, MdBugReport, MdArchive, MdAlarm, MdVideocam } from \"react-icons/md\";\r\n\r\nexport const icons = {\r\n    work: <MdWork />,\r\n    book: <MdBook />,\r\n    person: <MdPerson />,\r\n    star: <MdStar />,\r\n    money: <MdAttachMoney />,\r\n    game: <MdVideogameAsset />,\r\n    mark: <MdMarkunread />,\r\n    event: <MdEvent />,\r\n    cart: <MdLocalGroceryStore />,\r\n    bus: <MdDirectionsBus />,\r\n    bug: <MdBugReport />,\r\n    archive: <MdArchive />,\r\n    alarm: <MdAlarm />,\r\n    cam: <MdVideocam />,\r\n}\r\n\r\nexport function getIcon(key) {\r\n    return icons[key]\r\n}\r\n\r\nexport function iconList() {\r\n    return Object.keys(icons)\r\n}","export function randDarkColor() {\r\n    var lum = -0.25;\r\n    var hex = String('#' + Math.random().toString(16).slice(2, 8).toUpperCase()).replace(/[^0-9a-f]/gi, '');\r\n    if (hex.length < 6) {\r\n        hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\r\n    }\r\n    var rgb = \"#\",\r\n        c, i;\r\n    for (i = 0; i < 3; i++) {\r\n        c = parseInt(hex.substr(i * 2, 2), 16);\r\n        c = Math.round(Math.min(Math.max(0, c + (c * lum)), 255)).toString(16);\r\n        rgb += (\"00\" + c).substr(c.length);\r\n    }\r\n    return rgb;\r\n}\r\n","import { forwardRef, useEffect, useRef, useState } from 'react';\r\nimport { createUseStyles } from 'react-jss'\r\nimport useTodos from '../../hooks/useTodos';\r\nimport Todo from '../Todo';\r\nimport 'moment/locale/zh-tw';\r\nimport moment from 'moment';\r\nimport { getIcon, icons } from '../../utils/icon';\r\nimport OutsideClickHandler from 'react-outside-click-handler';\r\nimport { addDoc, collection, deleteDoc, doc, writeBatch, updateDoc } from 'firebase/firestore';\r\nimport { MdAdd, MdClear, MdKeyboardArrowLeft, MdKeyboardArrowRight, MdPalette } from \"react-icons/md\";\r\nimport { AiFillPushpin } from \"react-icons/ai\";\r\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\r\nimport { makeId } from '../../utils/makeId';\r\nimport { cloneElement } from 'react';\r\nimport { randDarkColor } from '../../utils/randomColor';\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nconst useStyle = createUseStyles({\r\n    root: {\r\n        backgroundColor: \"white\",\r\n        boxShadow: [0, 0, 5, 0, \"gray\"],\r\n        borderRadius: 5,\r\n        margin: [20, 0],\r\n    },\r\n    header: ({ color }) => ({\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        backgroundColor: color,\r\n        borderRadius: [5, 5, 0, 0],\r\n        padding: [10, 10],\r\n        color: \"white\",\r\n        fontWeight: 500,\r\n        fontSize: 18,\r\n        transition: \".3s\"\r\n    }),\r\n    input: ({ isEditing }) => ({\r\n        position: isEditing ? \"relative\" : \"absolute\",\r\n        opacity: isEditing ? 1 : 0,\r\n        pointerEvents: isEditing ? \"auto\" : \"none\",\r\n        outline: \"none\",\r\n        flexGrow: 1,\r\n        fontSize: 18\r\n    }),\r\n    title: ({ isEditing, finished }) => ({\r\n        display: \"inline-block\",\r\n        height: 25,\r\n        position: !isEditing ? \"relative\" : \"absolute\",\r\n        opacity: !isEditing ? 1 : 0,\r\n        pointerEvents: !isEditing ? \"auto\" : \"none\",\r\n        flexGrow: 1,\r\n        fontSize: 20,\r\n        cursor: \"default\",\r\n        textDecoration: finished ? \"line-through\" : \"none\",\r\n        overflow: \"hidden\",\r\n        whiteSpace: \"nowrap\",\r\n        textOverflow: \"ellipsis\"\r\n    }),\r\n    list: {\r\n        padding: [5, 0]\r\n    },\r\n    footer: {\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        padding: [5, 10],\r\n        fontSize: 14,\r\n        justifyContent: \"space-between\",\r\n    },\r\n    status: {\r\n        cursor: \"pointer\",\r\n        display: \"inline-block\",\r\n        backgroundColor: \"white\",\r\n        borderRadius: 100,\r\n        padding: [2, 10],\r\n        transition: \".3s\",\r\n        \"&:hover\": {\r\n            filter: \"brightness(0.9)\"\r\n        }\r\n    },\r\n    priority: ({ priority }) => ({\r\n        display: \"inline-block\",\r\n        backgroundColor: [\"green\", \"#f7be2d\", \"red\"][priority],\r\n        width: 10,\r\n        height: 10,\r\n        margin: [0, 5, 0, 0],\r\n        borderRadius: 100\r\n    }),\r\n    process: ({ color, process }) => ({\r\n        overflow: \"hidden\",\r\n        borderRadius: [0, 0, 5, 5],\r\n        \"& div\": {\r\n            backgroundColor: color,\r\n            width: `${process}%`,\r\n            height: 5,\r\n            transition: \".5s\"\r\n        }\r\n    }),\r\n    button: ({ color }) => ({\r\n        cursor: \"pointer\",\r\n        width: 25,\r\n        height: 25,\r\n        display: \"inline-flex\",\r\n        padding: 1,\r\n        alignItems: \"center\",\r\n        borderRadius: 100,\r\n        justifyContent: \"center\",\r\n        backgroundColor: color,\r\n        transition: \".3s\",\r\n        flexShrink: 0,\r\n        \"& svg\": {\r\n            color: \"white\",\r\n            transition: \".3s\",\r\n        },\r\n        \"&:hover\": {\r\n            backgroundColor: \"white\",\r\n            \"& svg\": {\r\n                color: color,\r\n            },\r\n            \"& svg.rotate\": {\r\n                transform: \"rotate(180deg)\"\r\n            },\r\n        }\r\n    }),\r\n    menu: {\r\n        position: \"absolute\",\r\n        padding: 10,\r\n        width: 200,\r\n        backgroundColor: \"white\",\r\n        top: \"calc(100% + 10px)\",\r\n        boxShadow: [0, 0, 5, 2, \"gray\"],\r\n        zIndex: 10,\r\n        borderRadius: 10,\r\n        transition: \".3s\"\r\n    },\r\n    iconSelect: {\r\n        cursor: \"pointer\",\r\n        width: 25,\r\n        height: 25,\r\n        display: \"inline-flex\",\r\n        padding: 4,\r\n        alignItems: \"center\",\r\n        borderRadius: 100,\r\n        justifyContent: \"center\",\r\n        transition: \".3s\",\r\n    },\r\n    item: ({ color }) => ({\r\n        padding: 5,\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        color: color,\r\n        backgroundColor: \"white\",\r\n        \"&:hover\": {\r\n            color: \"white\",\r\n            backgroundColor: color,\r\n        },\r\n        userSelect: \"none\"\r\n    }),\r\n    selectPriority: {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\"\r\n    },\r\n    invertButton: ({ color }) => ({\r\n        cursor: \"pointer\",\r\n        width: 25,\r\n        height: 25,\r\n        margin: [0, 10],\r\n        display: \"inline-flex\",\r\n        padding: 1,\r\n        alignItems: \"center\",\r\n        borderRadius: 100,\r\n        justifyContent: \"center\",\r\n        backgroundColor: \"white\",\r\n        transition: \".3s\",\r\n        flexShrink: 0,\r\n        \"& svg\": {\r\n            color: color,\r\n            transition: \".3s\",\r\n        },\r\n        \"&:hover\": {\r\n            backgroundColor: color,\r\n            \"& svg\": {\r\n                color: \"white\",\r\n            },\r\n        }\r\n    }),\r\n    dataPicker: ({ color }) => ({\r\n        boxSizing: \"border-size\",\r\n        margin: [10, 0],\r\n        padding: [5, 10],\r\n        width: \"100%\",\r\n        borderRadius: 100,\r\n        outline: \"none\",\r\n        border: [2, \"solid\", color],\r\n    }),\r\n    dataPickerClear: ({ color }) => ({\r\n        \"&::after\": {\r\n            backgroundColor: color + \" !important\"\r\n        }\r\n    }),\r\n})\r\n\r\n\r\n\r\nexport default forwardRef(function Topic({ topic }, ref) {\r\n\r\n    const [isEditing, setEditing] = useState(false)\r\n    const inputRef = useRef(null);\r\n\r\n\r\n    const [title, setTitle] = useState(\"\")\r\n    const [list, setList] = useState([])\r\n\r\n    const [topMenuShow, setTopMenuShow] = useState(false)\r\n    const [bottomMenuShow, setBottomMenuShow] = useState(false)\r\n\r\n    const { todos } = useTodos(topic.id, list);\r\n\r\n    const classes = useStyle({\r\n        color: topic.color,\r\n        priority: topic.priority,\r\n        process: todos ? todos.length === 0 ? 100 : todos.filter(t => t.finished).length / todos.length * 100 : 0,\r\n        isEditing\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (!topic) return\r\n        setTitle(topic.title)\r\n        setList(topic.list)\r\n    }, [topic])\r\n\r\n    function startEditing() {\r\n        setEditing(true)\r\n        inputRef.current.focus()\r\n        inputRef.current.select()\r\n    }\r\n\r\n    function finishedEditing() {\r\n        if (isEditing) {\r\n            const ref = doc(window.db, \"topic\", topic.id);\r\n            updateDoc(ref, {\r\n                title\r\n            })\r\n            setEditing(false)\r\n        }\r\n    }\r\n\r\n    function onDragEnd(result) {\r\n        if (!result.destination) {\r\n            return;\r\n        }\r\n        const items = Array.from(topic.list);\r\n        const [removed] = items.splice(result.source.index, 1);\r\n        items.splice(result.destination.index, 0, removed);\r\n\r\n        setList(items)\r\n        const ref = doc(window.db, \"topic\", topic.id);\r\n        updateDoc(ref, {\r\n            list: items\r\n        })\r\n\r\n    }\r\n\r\n    async function add() {\r\n        const batch = writeBatch(window.db);\r\n        const docRef = doc(window.db, \"todo\", makeId(10));\r\n        batch.set(docRef, {\r\n            tid: topic.id,\r\n            text: \"新項目\",\r\n            finished: false\r\n        });\r\n        const list = [...topic.list, docRef.id]\r\n        setList(list)\r\n        const ref = doc(window.db, \"topic\", topic.id);\r\n        batch.update(ref, { list });\r\n        await batch.commit();\r\n    }\r\n\r\n    async function remove(id) {\r\n        const batch = writeBatch(window.db);\r\n        const list = topic.list.filter((todo) => todo !== id)\r\n        setList(list)\r\n        const ref = doc(window.db, \"topic\", topic.id);\r\n        batch.update(ref, {\r\n            list\r\n        })\r\n        batch.delete(doc(window.db, \"todo\", id));\r\n        batch.commit()\r\n    }\r\n\r\n    async function removeTopic() {\r\n        const batch = writeBatch(window.db);\r\n        batch.delete(doc(window.db, \"topic\", topic.id))\r\n        list.forEach((id) => {\r\n            batch.delete(doc(window.db, \"todo\", id));\r\n        })\r\n        batch.commit()\r\n    }\r\n\r\n    async function switchIcon(icon) {\r\n        const ref = doc(window.db, \"topic\", topic.id);\r\n        updateDoc(ref, {\r\n            icon: icon\r\n        })\r\n    }\r\n\r\n    function randomColor() {\r\n        const ref = doc(window.db, \"topic\", topic.id);\r\n        updateDoc(ref, {\r\n            color: randDarkColor()\r\n        })\r\n    }\r\n\r\n    function changePriority(value) {\r\n        let newPriority = (topic.priority + 4 + value) % 4\r\n        const ref = doc(window.db, \"topic\", topic.id);\r\n        updateDoc(ref, {\r\n            priority: newPriority\r\n        })\r\n    }\r\n\r\n    function changeDeadline(date) {\r\n        console.log(\"date\", date);\r\n        const ref = doc(window.db, \"topic\", topic.id);\r\n        updateDoc(ref, {\r\n            deadline: date\r\n        })\r\n    }\r\n\r\n    return (todos ?\r\n        <div className={classes.root} ref={ref}>\r\n            <OutsideClickHandler\r\n                onOutsideClick={() => {\r\n                    finishedEditing()\r\n                    setTopMenuShow(false)\r\n                }}\r\n                display=\"block\"\r\n            >\r\n                <div className={classes.header}>\r\n                    <span className={classes.button} onClick={() => setTopMenuShow(true)}>\r\n                        {getIcon(topic.icon)}\r\n                    </span>\r\n                    <div className={classes.menu} style={{ color: topic.color, opacity: topMenuShow ? 1 : 0, pointerEvents: topMenuShow ? \"auto\" : \"none\" }}>\r\n                        <div>\r\n                            {Object.keys(icons).map((k) =>\r\n                                <span key={k} className={classes.iconSelect} style={{ background: topic.icon === k && topic.color }} onClick={() => switchIcon(k)}>\r\n                                    {cloneElement(icons[k], { size: 20, color: topic.icon === k ? \"white\" : \"\" })}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                        <hr />\r\n                        <div className={classes.item} onClick={removeTopic}><MdClear /> 刪除</div>\r\n                        <div className={classes.item} onClick={randomColor}><MdPalette /> 更換顏色</div>\r\n                    </div>\r\n\r\n                    <span style={{ width: 5 }} />\r\n                    <div className={classes.title} onDoubleClick={startEditing}>{title}</div>\r\n                    <input ref={inputRef}\r\n                        className={classes.input}\r\n                        value={title}\r\n                        onKeyDown={(e) => { if (e.key === \"Enter\") finishedEditing() }}\r\n                        onChange={(e) => setTitle(e.target.value)} />\r\n                    <span className={classes.button}>\r\n                        <MdAdd className=\"rotate\" onClick={add} />\r\n                    </span>\r\n\r\n                </div>\r\n            </OutsideClickHandler>\r\n            <DragDropContext onDragEnd={onDragEnd}>\r\n                <Droppable droppableId=\"droppable\">\r\n                    {(provided, snapshot) => (\r\n                        <div\r\n                            {...provided.droppableProps}\r\n                            ref={provided.innerRef}\r\n                            className={classes.list}\r\n                        >\r\n                            {todos.map((todo, i) =>\r\n                                <Draggable key={todo.id} draggableId={todo.id} index={i}>\r\n                                    {(provided, snapshot) => (\r\n                                        <Todo ref={provided.innerRef} key={todo.id} todo={todo} color={topic.color}\r\n                                            provided={provided} snapshot={snapshot} remove={remove} />\r\n                                    )}\r\n                                </Draggable>\r\n                            )}\r\n                            {provided.placeholder}\r\n                        </div>\r\n                    )}\r\n                </Droppable>\r\n            </DragDropContext>\r\n\r\n            <OutsideClickHandler\r\n                onOutsideClick={() => {\r\n                    setBottomMenuShow(false)\r\n                }}\r\n                display=\"block\"\r\n            >\r\n                <div className={classes.footer}>\r\n                    <span style={{ color: topic.color, fontWeight: 500 }}>\r\n                        {todos.length === 0 ? 0 : Math.round(todos.filter(t => t.finished).length / todos.length * 100)}%\r\n                    </span>\r\n                    <span className={classes.status} onClick={() => setBottomMenuShow(true)}>\r\n                        {topic.priority === 3 ? <AiFillPushpin color={topic.color} style={{ marginRight: 5 }} /> : <span className={classes.priority} />}\r\n                        {!topic.deadline ? \"無時限\" :\r\n                            moment(topic.deadline.toDate()).isBefore(moment()) ? <span style={{ color: \"red\" }}>已過期</span> :\r\n                                moment(topic.deadline.toDate()).local(\"zh-tw\").fromNow()\r\n                        }\r\n                    </span>\r\n                    <div className={classes.menu} style={{ right: 0, color: topic.color, opacity: bottomMenuShow ? 1 : 0, pointerEvents: bottomMenuShow ? \"auto\" : \"none\" }}>\r\n                        <div className={classes.selectPriority}>\r\n                            <span className={classes.invertButton} onClick={() => changePriority(-1)}>\r\n                                <MdKeyboardArrowLeft size={25} />\r\n                            </span>\r\n                            {topic.priority === 3 ? <AiFillPushpin color={topic.color} /> : <span className={classes.priority} />}\r\n                            <span style={{ color: [\"green\", \"#f7be2d\", \"red\"][topic.priority] }}>\r\n                                {topic.priority === 3 ? \"釘選\" : [\"低\", \"中\", \"高\"][topic.priority]}\r\n                            </span>\r\n                            <span className={classes.invertButton} onClick={() => changePriority(1)}>\r\n                                <MdKeyboardArrowRight size={25} />\r\n                            </span>\r\n                        </div>\r\n                        {console.log(topic.deadline)}\r\n                        <DatePicker\r\n                            className={classes.dataPicker}\r\n                            selected={topic.deadline ? topic.deadline.toDate() : null}\r\n                            onChange={changeDeadline}\r\n                            dateFormat=\"yyyy/MM/dd\"\r\n                            isClearable\r\n                            placeholderText=\"無時限\"\r\n                            clearButtonClassName={classes.dataPickerClear}\r\n                        />\r\n                    </div>\r\n\r\n                </div>\r\n            </OutsideClickHandler>\r\n            <div className={classes.process} >\r\n                <div />\r\n            </div>\r\n        </div>\r\n        :\r\n        <></>\r\n    );\r\n}\r\n)\r\n","import { useEffect, useRef, useState } from \"react\"\r\nimport { doc, getDoc, getDocs, documentId, query, collection, where, onSnapshot } from \"firebase/firestore\";\r\nimport _ from \"lodash\";\r\nimport { makeId } from \"../utils/makeId\";\r\n\r\nexport default function useTodos(id, list) {\r\n    const [todos, setTodos] = useState([])\r\n\r\n    const preList = useRef(null)\r\n\r\n    async function load() {\r\n        const q = query(collection(window.db, \"todo\"), where(\"tid\", \"==\", id));\r\n\r\n        const querySnapshot = await getDocs(q);\r\n        let arr = []\r\n        querySnapshot.forEach((doc) => {\r\n            arr[list.findIndex((id) => id === doc.id)] = ({ id: doc.id, ...doc.data() });\r\n\r\n        });\r\n        setTodos(arr)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!list) return\r\n        load()\r\n        const q = query(collection(window.db, \"todo\"), where(\"tid\", \"==\", id));\r\n        const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n            console.log(\"onSnapshot\");\r\n            querySnapshot.docChanges().forEach((change) => {\r\n                if (change.type === \"modified\") {\r\n                    const back = [...preList.current]\r\n                    back[list.findIndex((id) => id === change.doc.id)] = ({ id: change.doc.id, ...change.doc.data() });\r\n                    setTodos(back)\r\n                }\r\n            });\r\n        });\r\n\r\n        return () => {\r\n            unsubscribe()\r\n        }\r\n    }, [list])\r\n\r\n    useEffect(() => {\r\n        preList.current = todos\r\n    }, [todos])\r\n\r\n\r\n\r\n\r\n\r\n    return { todos, refresh: load }\r\n}","import { useEffect, useState } from 'react';\nimport { createUseStyles } from 'react-jss'\nimport { MdAdd, MdChevronRight } from \"react-icons/md\";\nimport useTopic from './hooks/useTopic'\nimport Topic from './components/Topic';\nimport { addDoc, collection } from 'firebase/firestore';\nimport FlipMove from \"react-flip-move\"\nimport { randDarkColor } from './utils/randomColor';\nconst useStyle = createUseStyles({\n  root: ({ show }) => ({\n    height: \"100vh\",\n    width: 350,\n    background: \"url(./background.jpg)\",\n    backgroundColor: \"rgba(255, 255, 255, 0.61)\",\n    zIndex: 0,\n    backgroundSize: \"cover\",\n    backgroundPositionX: \"50%\",\n    transition: \".3s\",\n    transform: show ? \"translateX(0)\" : \"translateX(400px)\"\n  }),\n  commandInput: {\n    display: \"flex\",\n    alignItems: \"center\",\n    width: 350,\n    backgroundColor: \"white\",\n    padding: [10, 10],\n    \"& input\": {\n      flexGrow: 1,\n      padding: 5,\n      fontSize: 16,\n      border: \"none\",\n      outline: \"none\"\n    }\n  },\n  list: {\n    padding: [0, 10],\n  },\n  addButton: {\n    cursor: \"pointer\",\n    width: 40,\n    height: 40,\n    display: \"inline-flex\",\n    alignItems: \"center\",\n    borderRadius: 100,\n    justifyContent: \"center\",\n    backgroundColor: \"white\",\n    transition: \".3s\",\n    \"& svg\": {\n      color: \"#222\",\n      transition: \".3s\",\n    },\n    \"&:hover\": {\n      backgroundColor: \"#222\",\n      \"& svg\": {\n        color: \"white\",\n        transform: \"rotate(180deg)\"\n      },\n    }\n  }\n})\n\nfunction App() {\n  const [queryString, setQueryString] = useState(\"\")\n  const [show, setShow] = useState(false)\n  const classes = useStyle({ show })\n\n  const { topic } = useTopic();\n\n  async function add() {\n    await addDoc(collection(window.db, \"topic\"), {\n      color: randDarkColor(),\n      deadline: null,\n      icon: \"person\",\n      list: [],\n      priority: 0,\n      title: \"新主題\"\n    });\n  }\n\n  useEffect(() => {\n    const ws = new WebSocket('ws://localhost:4141');\n\n    ws.onmessage = (function incoming(message) {\n      if (message.data === \"show\") {\n        setShow(true)\n      } else if (message.data === \"hidden\") {\n        setShow(false)\n      }\n    });\n    ws.onopen = () => console.log(\"open\");\n  }, [])\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.commandInput}>\n        <MdChevronRight size={24} />\n        <input value={queryString} onChange={(e) => setQueryString(e.target.value)} />\n        <span className={classes.addButton} onClick={add}>\n          <MdAdd size={24} />\n        </span>\n      </div>\n\n      <div className={classes.list}>\n        {topic &&\n          <FlipMove>{topic.map((topic) => <Topic key={topic.id} topic={topic} />)}</FlipMove>\n        }\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, enableIndexedDbPersistence, CACHE_SIZE_UNLIMITED } from \"firebase/firestore\"\nimport { disableNetwork } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAZQRdlE7NZ7Tws_sPkMyll8-dzVoj9kyE\",\n  authDomain: \"coherent-ascent-311605.firebaseapp.com\",\n  projectId: \"coherent-ascent-311605\",\n  storageBucket: \"coherent-ascent-311605.appspot.com\",\n  messagingSenderId: \"148310881329\",\n  appId: \"1:148310881329:web:6b2cccf07a7ca0d7839110\",\n  measurementId: \"G-L8XMFDZTJX\"\n};\n\nwindow.firebase = initializeApp(firebaseConfig);\nwindow.db = getFirestore(window.firebase\n  , { cacheSizeBytes: CACHE_SIZE_UNLIMITED }\n);\n\nenableIndexedDbPersistence(window.db)\n  .catch((err) => {\n    if (err.code === 'failed-precondition') {\n      throw new Error('failed-precondition')\n    } else if (err.code === 'unimplemented') {\n      throw new Error('unimplemented')\n    }\n  });\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}